{% extends "layout.html" %}
{% block header %}
	<!--
		В тэг title вписываем название для каждой страницы
		оно будет отображаться на вкладке браузера
	-->
	{% if title %}
	    <title>{{title}}</title>
	{% else %}
	    <title>FieldNLP HSE</title>
	{% endif %}
	<!--
		В тэги meta в свойство content нужно вписать текст, который будет отображаться
		в ссылках на страницу в соцсетях и будет краулиться поисковыми движками
	-->
	<meta property="og:title" content="Морфологический парсинг"/>
	<meta property="og:description" content="Морфологический анализ для малоресурсных языков" />
	<!--
		Если нужно добавить javascript или css,
		специфичный именно для вашей страницы,
		раскомментируйте одну из строк ниже
		и добавьте ссылку на локальный файл / файл из cdn
	-->
	<script type="text/javascript" defer src="{{ url_for('static', filename='js/parsers.js') }}"></script>
	<!-- <link rel="stylesheet" type="text/css" href="...someUrl..."> -->
{% endblock %}
{% block body %}
<!--
	добавляйте к div-ам, в которые оборачиваете конкретные элементы, класс mb-3.
	так они будут ровно вставать внутри основной колонки.
-->
<!-- Пример заголовка страницы (надо будет подумать, куда его передвинуть) -->
<h1 class="mb-6 text-center text-wrap" style="font-size: 1.5rem;">Морфологический&nbsp;анализ малоресурсных&nbsp;языков</h1>
<div>
	<form method="post" id="parserForm">
		<!-- невидимый инпут для выбора формы ответа -->
		<input name="output_type" value="plaintext" hidden aria-hidden="true" id="output"/>
		<div class="form-group mb-3">
			<select class="custom-select" name="transducer" id="transducer" required aria-required="true">
				<option 
					{% if curlang == "none" %} selected="true" {% endif %} 
					disabled="disabled"
				>Выберите язык</option>
				{% for key, val in mapping.items() %}
					<option 
						value="{{ key }}"
						{% if curlang==key %} selected="true" {% endif %}
					>{{ val.html_name }}</option>
				{% endfor %}
			</select>
		</div>

		<div class="form-row d-flex flex-column flex-md-row justify-content-between mb-3">
			<div class="col">
				<div>
					<textarea class="form-control mb-3" id="Input" name="text" rows="4">{{ request_text }}</textarea>
					<label for="Input" style="font-size: 0.7rem;">Текст можно ввести в поле выше или загрузить в виде файла:</label>
					<input type="file" class="form-control-file" enctype="multipart/form-data" id="FileUploadForm" placeholder="Введите текст"/>
					<small id="FileUploadHelp" class="form-text text-muted">Допустимые расширения — .txt,</small>
				</div>				
			</div>
			<div class="col d-flex flex-row">
				<div class="card flex-grow-1 w-50 h-100">
					<div class="p-3 card-text h-100">
						{% for item in response_text %}
							<span 
								tabindex="0"
								class="badge badge-secondary text-wrap"
								data-toggle="tooltip"
								data-html="true"
								title="{% for analysis in item.analyses %}
								<ul>
									<li>{{ loop.index }} lemma: {{ analysis.lemma }}</li>
									<li>gloss: {{ analysis.gloss }}</li>
								</ul>
								<hr/>
								{% endfor %}"
							>{{ item.token }} </span>
						{% endfor %}
					</div>
				</div>
				<div class="w-25 col-3 d-flex flex-column h-100 justify-content-between" style="padding-right: 0;">
					<button id="plaintext" style="font-size: 0.65rem !important;" type="submit" class="btn btn-primary">Отобразить</button>
					<button id="json" style="font-size: 0.65rem !important;" type="submit" class="btn btn-primary">&#8681;&nbsp;JSON</button>
					<button id="xml" style="font-size: 0.65rem !important;" type="submit" class="btn btn-primary">&#8681;&nbsp;XML</button>
				</div>
			</div>
		</div>		
	</form>
</div>

<!-- Пример блока card (в него можно вписывать текст) -->
<div class="card mb-3">
	<div class="card-header">Как это работает?</div>
 	<div class="card-body">
 		<div class="card-title">А никак, на..й</div>
    	<div class="card-text">))0)</div>
 	</div>
</div>
<div class="card mb-3">
	<div class="card-header">Оставить отзыв</div>
 	<div class="card-body">
 		<div class="card-title">Проезжая станцию, с меня слетела шляпа</div>
    	<div class="card-text"></div>
 	</div>
</div>
{% endblock %}